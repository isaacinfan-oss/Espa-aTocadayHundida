{{- if not (.Param "hideFooter") }}
<footer class="footer">
  <p>
    © {{ now.Year }} {{ site.Title }} ·
    <a href="/legal/aviso-legal/">Aviso Legal</a> ·
    <a href="/legal/politica-privacidad/">Política de Privacidad</a> ·
    <a href="/legal/contacto/">Contacto</a>
  </p>
</footer>
{{- end }}

{{- if (not site.Params.disableScrollToTop) }}
<a href="#top" aria-label="Volver arriba" title="Volver arriba" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>
{{- end }}

<script>
  // --- Botón "Volver arriba" ---
  const topButton = document.getElementById("top-link");
  window.addEventListener("scroll", () => {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      topButton.style.visibility = "visible";
      topButton.style.opacity = "1";
    } else {
      topButton.style.visibility = "hidden";
      topButton.style.opacity = "0";
    }
  });

  // --- Cambio de tema claro/oscuro ---
  const themeToggle = document.getElementById("theme-toggle");
  if (themeToggle) {
    themeToggle.addEventListener("click", () => {
      const html = document.querySelector("html");
      if (html.dataset.theme === "dark") {
        html.dataset.theme = 'light';
        localStorage.setItem("pref-theme", 'light');
      } else {
        html.dataset.theme = 'dark';
        localStorage.setItem("pref-theme", 'dark');
      }
    });

    // Cargar la preferencia guardada
    const prefTheme = localStorage.getItem("pref-theme");
    if (prefTheme) {
      document.documentElement.dataset.theme = prefTheme;
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.dataset.theme = 'dark';
    }
  }
</script>

